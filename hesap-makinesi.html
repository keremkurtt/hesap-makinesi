<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hesap Makinesi — GitHub için</title>
  <style>
    :root{
      --bg:#0f1724; --panel:#0b1220; --accent:#0ea5a4; --muted:#94a3b8; --glass: rgba(255,255,255,0.04);
      --btn:#111827; --btn-shadow: rgba(2,6,23,0.6);
      font-synthesis: none;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background: radial-gradient(1200px 400px at 10% 10%, rgba(14,165,164,0.07), transparent),
                  radial-gradient(1000px 300px at 90% 90%, rgba(99,102,241,0.04), transparent),
                  var(--bg); color:#e6eef8; -webkit-font-smoothing:antialiased; display:flex; align-items:center; justify-content:center; padding:24px;
    }

    .card{width:360px; max-width:calc(100% - 48px); background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px; padding:18px; box-shadow: 0 8px 30px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.03);
    }

    .display{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:14px; border-radius:10px; margin-bottom:12px; min-height:78px; display:flex; flex-direction:column; justify-content:center;}
    .expr{font-size:16px; color:var(--muted); min-height:20px; overflow:auto; text-align:right;}
    .result{font-size:28px; font-weight:600; text-align:right; margin-top:6px; word-break:break-all}

    .keys{display:grid; grid-template-columns: repeat(4,1fr); gap:10px}
    button.key{background:var(--btn); border-radius:10px; padding:16px; border:0; color:inherit; font-size:18px; box-shadow: 0 6px 18px var(--btn-shadow); cursor:pointer; user-select:none}
    button.key:active{transform:translateY(1px)}
    button.func{background:var(--glass); color:var(--muted); font-weight:600}
    button.op{background:linear-gradient(180deg,var(--accent), #089489); color:#041014; font-weight:700}
    button.wide{grid-column: span 2}

    .footer{display:flex; justify-content:space-between; margin-top:12px; color:var(--muted); font-size:13px}
    .small-btn{background:transparent; border:1px solid rgba(255,255,255,0.03); padding:6px 10px; border-radius:8px; cursor:pointer}

    @media (max-width:420px){ .card{width:100%} .result{font-size:24px} }
  </style>
</head>
<body>
  <main class="card" role="application" aria-label="Hesap Makinesi">
    <section class="display" aria-live="polite">
      <div id="expr" class="expr">0</div>
      <div id="result" class="result">0</div>
    </section>

    <section class="keys" role="group" aria-label="Hesap tuşları">
      <button class="key func" data-action="clear" title="Tümü temizle">AC</button>
      <button class="key func" data-action="back" title="Geri sil">⌫</button>
      <button class="key func" data-action="percent" title="Yüzde">%</button>
      <button class="key op" data-value="/">÷</button>

      <button class="key" data-value="7">7</button>
      <button class="key" data-value="8">8</button>
      <button class="key" data-value="9">9</button>
      <button class="key op" data-value="*">×</button>

      <button class="key" data-value="4">4</button>
      <button class="key" data-value="5">5</button>
      <button class="key" data-value="6">6</button>
      <button class="key op" data-value="-">−</button>

      <button class="key" data-value="1">1</button>
      <button class="key" data-value="2">2</button>
      <button class="key" data-value="3">3</button>
      <button class="key op" data-value="+">+</button>

      <button class="key wide" data-value="0">0</button>
      <button class="key" data-value=".">.</button>
      <button class="key op" data-action="equals">=</button>
    </section>

    <div class="footer">
      <div>Basit &amp; duyarlı • Klavye destekli</div>
      <div>
        <button id="copyBtn" class="small-btn">Sonucu kopyala</button>
      </div>
    </div>
  </main>

  <script>
    (function(){
      const exprEl = document.getElementById('expr');
      const resEl = document.getElementById('result');
      const copyBtn = document.getElementById('copyBtn');

      let expr = '';
      let lastResult = '0';

      function updateDisplay(){
        exprEl.textContent = expr || '0';
        resEl.textContent = lastResult;
      }

      function sanitizeForEval(s){
        // Allow only digits, operators, parentheses, decimal point and percent
        // Replace ÷ × − with JS ops
        s = s.replace(/×/g,'*').replace(/÷/g,'/').replace(/−/g,'-');
        // Convert any stray characters out
        s = s.replace(/[^0-9+\-*/().%]/g,'');
        return s;
      }

      function compute(s){
        try{
          s = s.replace(/%/g, '/100'); // simple percent handling
          s = sanitizeForEval(s);
          if(!s) return '0';
          // Disallow leading zeros like 00... but keep decimals
          const val = Function('return ('+s+')')(); // small calculator use-case
          if(!isFinite(val)) return 'Error';
          return String(Number.isInteger(val) ? val : +val.toPrecision(12));
        }catch(e){ return 'Error' }
      }

      document.querySelectorAll('button.key').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const v = btn.dataset.value;
          const action = btn.dataset.action;
          if(action === 'clear'){ expr = ''; lastResult = '0'; updateDisplay(); return }
          if(action === 'back'){ expr = expr.slice(0,-1); lastResult = compute(expr); updateDisplay(); return }
          if(action === 'percent'){ expr += '%'; lastResult = compute(expr); updateDisplay(); return }
          if(action === 'equals'){ lastResult = compute(expr); expr = lastResult === 'Error' ? '' : lastResult; updateDisplay(); return }
          // otherwise value pressed
          if(v){
            // prevent multiple dots in a number segment
            if(v === '.'){
              const parts = expr.split(/[^0-9.]/);
              if(parts[parts.length-1].includes('.')) return; // ignore extra dot
            }
            expr += v;
            lastResult = compute(expr);
            updateDisplay();
          }
        })
      })

      copyBtn.addEventListener('click', async ()=>{
        try{ await navigator.clipboard.writeText(lastResult); copyBtn.textContent = 'Kopyalandı ✓'; setTimeout(()=>copyBtn.textContent='Sonucu kopyala',1200);}catch(e){ copyBtn.textContent='İzin gerek'; setTimeout(()=>copyBtn.textContent='Sonucu kopyala',1200)}
      })

      // Keyboard support
      window.addEventListener('keydown', (e)=>{
        const key = e.key;
        if((/\d/).test(key)) return clickButtonByValue(key);
        if(key === 'Enter' || key === '='){ e.preventDefault(); return clickAction('equals') }
        if(key === 'Backspace') return clickAction('back');
        if(key === 'Escape') return clickAction('clear');
        if(key === '.') return clickButtonByValue('.');
        if(key === '+'||key === '-'||key === '*'||key === '/') return clickButtonByValue(key);
        if(key === '%') return clickAction('percent');
      })

      function clickButtonByValue(v){
        const btn = Array.from(document.querySelectorAll('button.key')).find(b=>b.dataset.value === v);
        if(btn) btn.click();
      }
      function clickAction(a){
        const btn = Array.from(document.querySelectorAll('button.key')).find(b=>b.dataset.action === a);
        if(btn) btn.click();
      }

      // init
      updateDisplay();
    })();
  </script>
</body>
</html>
